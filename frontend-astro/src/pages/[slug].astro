---
import SinglePage from "../layouts/SinglePage.astro";
import Base from "../layouts/Base.astro";
import { fetchSinglePost } from "../api/singlePost";

const { slug } = Astro.params;

let singlePost;
try {
  singlePost = await fetchSinglePost(slug);
  if (singlePost.items.length == 0) {
    return Astro.redirect("/404");
  }

  // Process the response
} catch (error) {
  console.error("Error fetching data:", error);
  // Handle the error or show a user-friendly message
}
---
{singlePost && (
  <Base title={singlePost.items[0].title}>
    <SinglePage post={singlePost.items[0]} />
  </Base>
)}